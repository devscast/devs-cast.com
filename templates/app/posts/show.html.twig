{% extends 'layout/base.html.twig' %}
{% set _data = blog ?? post %}
{% set _prefix = (data_type == 'blog') ? "Article " : "Vidéo " %}

{% block meta %}
    <title>{{ _prefix }}{{ _data.name }} | devs-cast.com</title>
    <meta property="og:title" content="{{ _prefix }}{{ _data.name }} | devs-cast.com">
    <meta property="og:description" content="{{ _data.description }}">
    <meta name="description" content="{{ _data.description }}">
    <meta property="og:image" content="{{ vich_uploader_asset(_data, 'thumb_file') }}">
    <meta property="og:image:secure_url" content="{{ vich_uploader_asset(_data, 'thumb_file') }}"/>

    {# {% if data_type == 'blog' %}
        <meta property="og:type" content="article"/>
        <meta property="og:article:published_time" content="{{ _data.createdAt | date("Y-m-d") }}"/>
        <meta property="og:article:modified_time" content="{{ _data.updatedAt | date("Y-m-d") }}"/>
        <meta property="og:article:author" content="{{ _data.user.name }}"/>
        <meta property="og:article:section" content="Technology"/>
    {% else %} #}
        <meta property="og:type" content="video.other"/>
        <meta property="og:video:actor" content="{{ _data.user.name }}"/>
        <meta property="og:video:writer" content="{{ _data.user.name }}"/>
        <meta property="og:video:duration" content="{{ _data.duration * 60 }}"/>
        <meta property="og:video:release_date" content="{{ _data.createdAt | date("Y-m-d") }}"/>
    {# {% endif %} #}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/dracula.min.css">
{% endblock %}

{% block body %}
    <main class="md:px-20 lg:pb-56 pb-10 px-5 bg-gray-100 z-10">
        <div class="lg:flex">
            <div class="lg:w-8/12 lg:pr-6">
                <div class="sticky top-0 pt-20">
                    <iframe
                        width="100%"
                        height="450px"
                        src="https://www.youtube-nocookie.com/embed/{{ _data.videoUrl }}"
                        frameborder="0"
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        class="rounded-lg shadow-xl"
                        controls
                        >
                    </iframe>
                    <div class="mt-5 rounded-lg p-4 bg-white shadow-xl">
                        <h2 class="text-blue-900 font-semibold">{{ _data.description }}</h2>
                        <p class="my-3">{{ _data.content }}</p>
                        <a href="" class="text-blue-500">https://larytech.com/</a>
                    </div>
                </div>
            </div>

            <div class="lg:w-4/12">
                <div class="lg:pt-20 pt-10">
                    <h2 class="text-2xl font-semibold text-blue-900">Vidéos similaires</h2>
                    <div class="grid lg:grid-cols-1 sm:grid-cols-2 mt-4 gap-6">
                        {% if posts is defined %}
                            {% for post in posts %}
                                 <a href="{{ path('app_post_show', {id: post.id, slug: post.slug}) }}" title="{{ post.name }}">
                                    <div class="view">
                                        <div class="view-head">
                                            <img src="{{ asset('assets/img/tutos/1.jpg') }}" class="view-poster" alt="{{ post.name }}">
                                        </div>
                                        <div class="mask">
                                            <div class="tutorial-mask items-center">
                                                <div class="pt-5">
                                                    <h4 class="text-white font-semibold">{{ post.name }}</h4>
                                                    <h4 class="text-white">{{ post.description }}</h4>
                                                </div>
                                                <a href="{{ path('app_post_show', {id: post.id, slug: post.slug}) }}" title="{{ post.name }}" class="hover:opacity-75 mt-5">
                                                    <div class="btn-play">
                                                        <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="fill-curent text-green-500" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                                                        </svg>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block javascripts %}
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}
